(()=>{"use strict";class t{#t;#e;constructor(t){this.#t=t,this.#e=0}isSunk(){return this.#t===this.#e}hit(){this.#e<this.#t&&(this.#e+=1)}getHits(){return this.#e}getLength(){return this.#t}}class e{#n;constructor(){this.board=new Array,this.#n=["A","B","C","D","E","F","G","H","I","J"];for(const t of this.#n)for(let e=1;e<=10;e++){let n={coordinates:`${t}${e}`,containsShip:null,shot:null};this.board.push(n)}}checkValidPlacement(t,e,n,r){if("horizontally"===e){if(r+t>11)return!1;for(let e=r;e<r+t;e++)if(null!==this.board.find((({coordinates:t})=>t===`${n}${e}`)).containsShip)return!1;return!0}if("vertically"===e){const e=this.#n.findIndex((t=>t===n));if(t+e>10)return!1;for(let n=e;n<e+t;n++)if(null!==this.board.find((({coordinates:t})=>t===`${this.#n[n]}${r}`)).containsShip)return!1;return!0}}placeShip(e,n,r,a){const o=new t(e);if("horizontally"===n)for(let t=a;t<=a+e;t++)this.board.find((({coordinates:e})=>e===`${r}${t}`)).containsShip=o;else if("vertically"===n){const t=this.#n.findIndex((t=>t===r));for(let n=t;n<=t+e;n++)this.board.find((({coordinates:t})=>t===`${this.#n[n]}${a}`)).containsShip=o}}receiveAttack(t,e){let n=this.board.find((({coordinates:n})=>n===`${t}${e}`));return"Shot"===n.shot?"You already fired at these coordinates!":null===n.containsShip?(n.shot="Shot","MISS"):(n.containsShip.hit(),n.shot="Shot","HIT")}checkEndGame(){for(const t of this.board)if(null!==t.containsShip&&!1===t.containsShip.isSunk())return!1;return!0}}class n{#r;constructor(t,n){this.name=t,this.#r="human"===n,this.board=new e}isHuman(){return this.#r}aiMove(t){if(!1===this.#r){let e=t.board[Math.floor(100*Math.random())];for(;"Shot"===e.shot;)e=t.board[Math.floor(100*Math.random())];let n=e.coordinates.split("");return t.receiveAttack(n[0],n[1])}}}class r{constructor(){this.currentPlayer,this.opponent}createPlayerOne(t){this.playerOne=new n(t,"human"),this.currentPlayer=this.playerOne}createPlayerTwo(t,e){"human"===e?(this.playerTwo=new n(t,e),this.opponent=this.playerTwo):(this.playerTwo=new n(t),this.opponent=this.playerTwo)}gameCheckForVictory(){return this.opponent.board.checkEndGame()}attack(t,e){const n=this.opponent.board.receiveAttack(t,e);return"You already fired at these coordinates!"===n?n:"HIT"===n&&this.gameCheckForVictory()?`HIT! ${this.currentPlayer.name} WON!`:(this.opponent===this.playerTwo?(this.opponent=this.playerOne,this.currentPlayer=this.playerTwo):(this.opponent=this.playerTwo,this.currentPlayer=this.playerOne),n)}aiAttack(){const t=this.currentPlayer.aiMove(this.opponent.board);return"HIT"===t&&this.gameCheckForVictory()?`HIT! ${this.currentPlayer.name} WON!`:(this.currentPlayer=this.playerOne,this.opponent=this.playerTwo,t)}}const a=document.querySelector("body");let o;function i(){for(;a.hasChildNodes();)a.removeChild(a.firstChild)}document.querySelector("#start").addEventListener("click",(()=>{o=new r,function(){i();const t=document.createElement("button");t.textContent="Play aganist another Player",a.appendChild(t),t.addEventListener("click",(()=>{!function(){i();const t=document.createElement("form"),e=document.createElement("input"),n=document.createElement("button");n.textContent="Create Player",a.appendChild(t),t.appendChild(e),t.appendChild(n),n.addEventListener("click",(()=>{event.preventDefault(),o.createPlayerOne(e.value),function(){i();const t=document.createElement("form"),e=document.createElement("input"),n=document.createElement("button");a.appendChild(t),t.appendChild(e),t.appendChild(n),n.textContent="Create Player",n.addEventListener("click",(()=>{event.preventDefault(),o.createPlayerTwo(e.value,"human"),console.log(o),i()}))}()}))}()}));const e=document.createElement("button");e.textContent="Play against Computer",a.appendChild(e),e.addEventListener("click",(()=>{!function(){i();const t=document.createElement("form"),e=document.createElement("input"),n=document.createElement("button");a.appendChild(t),t.appendChild(e),t.appendChild(n),n.textContent="Create Player",n.addEventListener("click",(()=>{event.preventDefault(),o.createPlayerOne(e.value),o.createPlayerTwo("Computer"),console.log(o),i()}))}()}))}()}))})();